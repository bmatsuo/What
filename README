what version 0.00_05
=================

ABSTRACT

The goal of the What package is to be the ultimate package of command-
line tools for What users. I stress the word users. This is not a package
of tools for seedboxes. This is meant to help Joe Everyuser get a good
ratio.

The package currently centers around creating releases. Depending on user
feedback, more libraries and more programs will be added.

CONTENTS
    Package Features
    Package Defeciencies
    Upload Directory Structure
    Workflow
    Rip Workflow
    Release Workflow
    Importing Workflow
    Release (Under the Hood)

PACKAGE FEATURES

This package can:
    Organize your all your releases into a user navigatable hierarchy.
    Create M3U playlists for release discs.
    Convert a FLAC release to MP3 with 320, V0, or V2 bitrate settings.
    Convert a FLAC release to OGG vorbis with -q8 quality setting.
    Convert a FLAC release to AAC with ~256 ABR setting (don't use).
    Rerelease FLAC / Log 100% / Cue snatches for tag trumps / better.php.
    Convert M3U playlists.
    Create torrents for releases.
    Convert release images to lower res versions for web hosting.
    Make you a sandwich, if you have permissions.

PACKAGE DEFECIENCIES

This package will probably never:
    Rip CDs to FLAC.
    Upload torrents.
    Score FLAC rip logs (this might be approximateable).

This package can not currently:
    Handle bandcamp.com releases (they keep getting more clever).
    Make good MP3s w/ non-Latin-1 tags (=> mojibake (lame: L 2 utf-8)).
    Make Apple Lossless coversions (meh).
    Make 'perfect' AAC 320 CBR conversions (no good portable lib/app).
    Create album descriptions.
    Create release descriptions.
    Manage your personal media library.
    Manage your personal media archival/backup.

The above list is pretty much a todo list.

UPLOAD DIRECTORY STRUCTURE

The library and program suite are set up to enforce a certain directory
structure. 

There is a root directory where all uploads are placed (henceforth called 
'the upload root'). Subdirectories of the upload root are named by 
artists.

Contained in each artist directory is one directory for each unique
release (i.e. album, single, ...) that has been ripped. In each release 
directory, there is a file Info.txt which should give some description
of the individual released (to be used as an album description).

In each release directory, there is one folder for each format of the
release (FLAC, 320kbps, V0, V2, ...). Torrents for each format will also
reside in the release directory. Then the torrent's directory is the same
as the directory the torrent should downloaded to.

For releases with multiple discs, the audio files are placed in seperate 
subdirectories of the rip directory labeled 'CDX' for disc number X.

Images are all placed in the top level of a format's directory, 
regardless of whether or not there are multiple discs in the release.
Log and CUE files should always be in the same directory as the same
music they describe.

Here is an example of the directory structure needed.

upload_root
|---Pop Star
|   `---Pop Star - New Album (2010)
|       |---Info.txt
|       `---Pop Star - New Album (2010) [FLAC]
|           |---Front.tiff
|           |---Back.tiff
|           |---Disc1.tiff
|           |---Disc2.tiff
|           |---CD1
|           |   |---01 A love song.flac
|           |   |---02 A sad song.flac
|           |   |   ...
|           |   |---New Album - CD1.log
|           |   `---New Album - CD1.cue
|           `---CD2
|               |---01 A love song (remix).flac
|               |---02 A Dance song.flac
|               |   ...
|               |---New Album - CD2.log
|               `---New Album - CD2.cue
`---Indie Duo
    `---Indie Duo - Fixies EP (2009)
        |---Indie Duo - Fixies EP (2009) [FLAC]
        |   |---01 Fixies.flac
        |   |---02 Fixies (Messenger Bag Remix).flac
        |   |---03 Fixed Gears in Space.flac
        |   |---Fixies.log
        |   `---Fixies.cue
        |---Indie Duo - Fixies EP (2009) [V0]
        |   |---01 Fixies.mp3
        |   |---02 Fixies (Messenger Bag Remix).mp3
        |   |---03 Fixed Gears in Space.flac
        |   |---Fixies.log
        |   `---Fixies.cue
        `---Info.txt

PACKAGE WORKFLOW

The What package enforces a specific workflow for uploading.  
There are two parts to uploading; ripping and releasing. 
The term 'releasing' is used meaning checking for a complete release, 
placing the release formats appropriately in the upload heirarchy 
(encoding to mp3 where necessary), creating a torrent, 
and finally adding the torrent to your preferred client.
                   
RIP WORKFLOW

All new releases should be ripped to the same directory (the 
'rip directory'). This directory should not be in the upload hierarchy 
(it probably could be, if placed with care). The program will check
the release and then place it in the upload heirachy.

For single disc rips, all flac files should be placed directly in the
rip directory. For multidisc rips, flac files should be separated into
subdirectorys of the form "<rip directory>/CDX/" where X is a disc number.

Log and CUE files should accompany all your rips, and should be placed
in the rip directory. The What package will not tolerate releases which 
can be trumped! This actually might change later.

TIFF image scans of album artwork and disc images should also be placed 
in the rip directory before releasing. JPEG album artwork is also 
accepted, but for an untrumpable release I think TIFF should be preferred.
There may be a way to not require album artwork in the future...

A release description Info.txt must be placed in the rip directory before
releasing. There are no required contents for Info.txt, so it can be an
empty file. Its recommended that you use the cross-platform description
generator (python) that is in the Laboratory forum and on github.

Ensure that all the necessary files are in the rip directory before
proceding to the releasing workflow.

RELEASE WORKFLOW

This is more-or-less automated this point. You need only run the
following command
    mkrelease \
        --artist "Indie Duo" --title "Darkest Darkness" --year 2010 \
        --flac --320 --v0 --v2
to release the band Indie Duo's brand new LP entitled Darkest Darkness in
all the best formats (really just the only ones supported at the moment).

Then you just need to upload the 4 respective torrents from your watch
directory (if they aren't deleted), or from in the upload hierarchy. 

Bandcamp.com releasing was recently broken. It may come back. 
But it probably won't be as automatic because their web request system
seems to be getting more sophisticated with this kind of stuff.

This should suit most of your uploading needs. Enjoy =)

IMPORTING WORKFLOW

If you've downloaded a FLAC / Log (100%) / Cue torrent and want to both
categorize it in the upload hierarchy and possibly reencode it for 
better.php; then you need to use the program release-import

Say the snatch directory is at path 
    '/Users/Me/Music/DL/Artist - Title {2010} FLAC'

Then, much like releasing a rip, you use the command
    release-import \
        --artist Artist --title Title --year 2010 \
        --320 --v0 --v2 --ogg
        --snatch '/Users/Me/Music/DL/Artist - Title {2010} FLAC'
This will add the snatch into the upload hierarchy, convert it to the 
4 requested formats, and create 4 torrents.

Before the snatch is added to the upload hierarchy, you will be
guided through the process of checking the tags and a few spectrograms.
This will insure that you are importing a quality release.

If the spectrograms of the snatch of suspect, no actions will be taken.
If the tags are poorly done, then a copy of the snatch is placed in the
rip directory, so that the files can be retagged and a tag trump can be
performed. If the spectrograms look fine and the tags are already good
then hard-links to the release files are made in the rip directory. 
This uses (effectively) zero extra HDD space. 

RELEASE (UNDER THE HOOD)

Currently, the only way to download bandcamp albums is by using mkrelease
as described directly above.

After you rip a CD, run the command,
    release-scaffold \
        --artist <artist> --year <year> --title <title> \
        [--num-discs <num-discs>]
to create the paths to the necessary music directories.

If you want, you can run
    release-ok [--num-discs <num_discs>]
to check that you have included things like log files and CUE files in
the flac release directory. This will help make sure that your uploads 
aren't trumped by others that are more complete.

Move the FLAC and image files into their proper directories (see 
UPLOAD DIRECTORY STRUCTURE). This will probably be automated soon enough.

Then run 
    release-flac-convert \
        --artist <artist> --year <year> --title <title> \
        [--v0] [--v2] [--320]
to create other desired formats.

Finally run
    release-mktorrent \
        --artist <artist> --year <year> --title <title> \
        [--flac] [--v0] [--v2] [--320]
to create torrents for each desired format.

COPYRIGHT AND LICENCE

Copyright (C) 2010 by Bryan Matsuo <bryan.matsuo@gmail.com>

This file is part of What.

What is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

What is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with What.  If not, see <http://www.gnu.org/licenses/>.
